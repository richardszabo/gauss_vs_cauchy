"use strict";var canvas = document.getElementById('canvas');var context = canvas.getContext('2d');if (context.canvas.width != window.innerWidth)     canvas.width = window.innerWidth;if (context.canvas.height != window.innerHeight)        context.canvas.height = window.innerHeight;var plot_canvas = document.getElementById('plot_canvas');var plot_context = plot_canvas.getContext('2d');if (plot_context.canvas.width != window.innerWidth)     plot_context.canvas.width = window.innerWidth;if (plot_context.canvas.height != window.innerHeight)        plot_context.canvas.height = window.innerHeight;var graph;var xmax = 10;var needResize = true;var xA = [];var yA = [];var i = 0;var lst = Date.now();var number_of_moves_per_sec = 300;var isRun = true;plot_canvas.addEventListener("mousedown", toggleRun, false);loop();function loop() {    var dif = Date.now() - lst;    lst = Date.now();    if( isRun ) {        var iter = number_of_moves_per_sec * dif/1000 + i;    	while( i < iter ) {    	    var bin = Math.round(gauss_random()*100)/100;    	    xA[bin] = (xA[bin] || 0) + 1;    	    //graph.plot1(bin,yA[bin]-1,yA[bin], "#0000ff");     	    var bin = Math.round(cauchy_random()*100)/100;    	    yA[bin] = (yA[bin] || 0) + 1;    	    //graph.plot1(bin,xA[bin]-1,xA[bin], "#ff0000");    	    ++i;            if( xA[bin] > xmax || yA[bin] > xmax ) {                needResize = true;            }    	}        if( needResize === true ) {            xmax = 2 * xmax;            context.clearRect(0,0,canvas.width,canvas.height);            graph = new Graph(context,plot_context,-4,4,0,xmax,(plot_context.canvas.width-100)/2,plot_context.canvas.height-50,plot_context.canvas.width-100,plot_context.canvas.height-50);            graph.drawgrid(1,0.2,xmax/5,xmax/20);            graph.drawaxes('x','y');            needResize = false;        }    	plot_context.clearRect(0,0,plot_canvas.width,plot_canvas.height);    	graph.plot(xA, "#ff0000");    	graph.plot(yA, "#0000ff");    }	window.requestAnimationFrame(loop);}function toggleRun() {        isRun = !isRun;}/*var graph = new Graph(context,plot_context,-4,4,0,5000,275,380,450,350);graph.drawgrid(1,0.2,1000,200);graph.drawaxes('x','y');var xA = [];for (var i=0; i<=1000000; i++){     var bin = Math.round(gauss_random()*100)/100;     xA[bin] = (xA[bin] || 0) + 1;}graph.plot(xA, "#ff0000");var yA = [];for (var i=0; i<=1000000; i++){     var bin = Math.round(cauchy_random()*100)/100;     yA[bin] = (yA[bin] || 0) + 1;}graph.plot(yA, "#0000ff");*/